# EzLib Fullstack Architecture Document

## Table of Contents

- [EzLib Fullstack Architecture Document](#table-of-contents)
  - [Introduction](./introduction.md)
    - [Starter Template or Existing Project](./introduction.md#starter-template-or-existing-project)
    - [Change Log](./introduction.md#change-log)
  - [High Level Architecture](./high-level-architecture.md)
    - [Technical Summary](./high-level-architecture.md#technical-summary)
    - [Platform and Infrastructure Choice](./high-level-architecture.md#platform-and-infrastructure-choice)
    - [Repository Structure](./high-level-architecture.md#repository-structure)
    - [High Level Architecture Diagram](./high-level-architecture.md#high-level-architecture-diagram)
    - [Architectural Patterns](./high-level-architecture.md#architectural-patterns)
  - [Tech Stack](./tech-stack.md)
    - [Technology Stack Table](./tech-stack.md#technology-stack-table)
  - [Data Models](./data-models.md)
    - [User](./data-models.md#user)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [LibReader](./data-models.md#libreader)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [LibAdmin](./data-models.md#libadmin)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [Author](./data-models.md#author)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [GeneralBook](./data-models.md#generalbook)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [BookEdition](./data-models.md#bookedition)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [BookContributor (Junction Table)](./data-models.md#bookcontributor-junction-table)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [BookInventory](./data-models.md#bookinventory)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [Collection](./data-models.md#collection)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [BorrowingTransaction](./data-models.md#borrowingtransaction)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [Review](./data-models.md#review)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
  - [API Specification](./api-specification.md)
    - [REST API Specification](./api-specification.md#rest-api-specification)
  - [Components](./components.md)
    - [Reader Social App (ezlib.com) - DEFAULT APPLICATION](./components.md#reader-social-app-ezlibcom-default-application)
    - [Library Management App (manage.ezlib.com) - SUBDOMAIN](./components.md#library-management-app-manageezlibcom-subdomain)
    - [Supabase Database Layer](./components.md#supabase-database-layer)
    - [Python Book Crawler Service](./components.md#python-book-crawler-service)
    - [Component Diagrams](./components.md#component-diagrams)
  - [External APIs](./external-apis.md)
    - [Open Library API](./external-apis.md#open-library-api)
    - [Google Books API](./external-apis.md#google-books-api)
    - [WorldCat Search API](./external-apis.md#worldcat-search-api)
    - [Goodreads API (Legacy/Web Scraping)](./external-apis.md#goodreads-api-legacyweb-scraping)
    - [ISBN Database API](./external-apis.md#isbn-database-api)
    - [Wikipedia API (Wikidata)](./external-apis.md#wikipedia-api-wikidata)
  - [Core Workflows](./core-workflows.md)
    - [1. Book Discovery to Borrowing Workflow (30-Second Pipeline)](./core-workflows.md#1-book-discovery-to-borrowing-workflow-30-second-pipeline)
    - [2. Book Metadata Enrichment Workflow](./core-workflows.md#2-book-metadata-enrichment-workflow)
    - [3. Cross-Subdomain Authentication Workflow](./core-workflows.md#3-cross-subdomain-authentication-workflow)
  - [Database Schema](./database-schema.md)
  - [Internationalization Architecture](./internationalization-architecture.md)
    - [i18n Technology Stack](./internationalization-architecture.md#i18n-technology-stack)
    - [User Preference-Based i18n Configuration](./internationalization-architecture.md#user-preference-based-i18n-configuration)
    - [User Preference-Driven Language System](./internationalization-architecture.md#user-preference-driven-language-system)
    - [Preference-Based Language Detection Flow (No URL Changes)](./internationalization-architecture.md#preference-based-language-detection-flow-no-url-changes)
    - [Translation File Structure](./internationalization-architecture.md#translation-file-structure)
    - [Cultural Formatting Implementation](./internationalization-architecture.md#cultural-formatting-implementation)
  - [Authentication Architecture](./authentication-architecture.md)
    - [Authentication Technology Stack](./authentication-architecture.md#authentication-technology-stack)
    - [Cross-Domain Authentication Strategy](./authentication-architecture.md#cross-domain-authentication-strategy)
    - [Registration and Authentication Flows](./authentication-architecture.md#registration-and-authentication-flows)
      - [New User Registration (Reader App Only)](./authentication-architecture.md#new-user-registration-reader-app-only)
      - [Cross-Domain Login Flow](./authentication-architecture.md#cross-domain-login-flow)
    - [Supabase Authentication Configuration](./authentication-architecture.md#supabase-authentication-configuration)
    - [Authentication Middleware](./authentication-architecture.md#authentication-middleware)
    - [Role-Based Access Control Implementation](./authentication-architecture.md#role-based-access-control-implementation)
  - [Privacy and GDPR Compliance Architecture](./privacy-and-gdpr-compliance-architecture.md)
    - [Privacy Technology Stack](./privacy-and-gdpr-compliance-architecture.md#privacy-technology-stack)
    - [Consent Management Data Model](./privacy-and-gdpr-compliance-architecture.md#consent-management-data-model)
    - [GDPR-Compliant Location Detection](./privacy-and-gdpr-compliance-architecture.md#gdpr-compliant-location-detection)
    - [Consent Management Component](./privacy-and-gdpr-compliance-architecture.md#consent-management-component)
    - [Data Retention and Cleanup](./privacy-and-gdpr-compliance-architecture.md#data-retention-and-cleanup)
    - [Right to Data Portability and Deletion](./privacy-and-gdpr-compliance-architecture.md#right-to-data-portability-and-deletion)
  - [Geolocation Services Integration](./geolocation-services-integration.md)
    - [Geolocation Service Architecture](./geolocation-services-integration.md#geolocation-service-architecture)
    - [Frontend Location Detection Hook](./geolocation-services-integration.md#frontend-location-detection-hook)
  - [Enhanced Frontend Architecture for i18n](./enhanced-frontend-architecture-for-i18n.md)
    - [Preference-Based React-Intl Integration](./enhanced-frontend-architecture-for-i18n.md#preference-based-react-intl-integration)
    - [Cultural Formatting Components](./enhanced-frontend-architecture-for-i18n.md#cultural-formatting-components)
    - [Language Switcher Components (No Routing)](./enhanced-frontend-architecture-for-i18n.md#language-switcher-components-no-routing)
    - [Server-Side Language Detection (No Routing)](./enhanced-frontend-architecture-for-i18n.md#server-side-language-detection-no-routing)
    - [App Integration (pages/_app.tsx)](./enhanced-frontend-architecture-for-i18n.md#app-integration-pagesapptsx)
